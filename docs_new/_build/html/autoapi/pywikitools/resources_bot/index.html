<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.06.04.1"/>
        <title>pywikitools.resources_bot - pywikidocs 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">pywikidocs 1.0.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">pywikidocs 1.0.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">API Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools</span></code></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../downloadalltranslations/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.downloadalltranslations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../dropboxupload/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.dropboxupload</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../fortraininglib/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.fortraininglib</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../generateodtbot/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.generateodtbot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../mediawiki2drupal/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.mediawiki2drupal</span></code></a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.resources_bot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../translateodt/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.translateodt</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../check_language_directions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">check_language_directions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../check_translateodt/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">check_translateodt</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../4training_family/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">4training_family</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generateodt/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">generateodt</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../correct_bot/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">correct_bot</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../check_for_typos/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">check_for_typos</span></code></a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="module-pywikitools.resources_bot">
<span id="pywikitools-resources-bot"></span><h1><a class="reference internal" href="#module-pywikitools.resources_bot" title="pywikitools.resources_bot"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.resources_bot</span></code></a><a class="headerlink" href="#module-pywikitools.resources_bot" title="Permalink to this headline">#</a></h1>
<p>Script to fill the “Available Resources in …” sections of all languages</p>
<p>This scripts scans through the worksheets and all their translations, saving also the links for PDF and ODT files.
It checks if new translations were added and changes the language overview pages where necessary.
It is supposed to run daily as a cronjob.</p>
<dl class="simple">
<dt>Main steps:</dt><dd><ol class="arabic simple">
<li><p>gather data: go through all worksheets and all their translations
This will take quite some time as it is many API calls</p></li>
<li><p>Update language overview pages where necessary
For example: <a class="reference external" href="https://www.4training.net/German#Available_training_resources_in_German">https://www.4training.net/German#Available_training_resources_in_German</a>
To make that easier, a JSON representation is saved for every language, e.g.
<a class="reference external" href="https://www.4training.net/4training:de.json">https://www.4training.net/4training:de.json</a>
The script will compare its results to the JSON and update the JSON and the language overview page when necessary</p></li>
<li><p>Post-processing (TODO: not yet implemented)
With information like “we now have a Hindi translation of the Prayer worksheet” we can do helpful things, e.g.
- update a zip file with all Hindi worksheets
- send an email notification to all interested in the Hindi resources</p></li>
</ol>
</dd>
<dt>Command line options:</dt><dd><p>–lang LANGUAGECODE: only look at this one language (significantly faster)
-l, –loglevel: change logging level (standard: warning; other options: debug, info)
–rewrite-all: Rewrite all language information pages
–read-from-cache: Read from the JSON structure instead of querying the current status of all worksheets</p>
</dd>
<dt>Logging:</dt><dd><p>If configured in config.ini (see config.example.ini), output will be logged to three different files
in three different verbosity levels (WARNING, INFO, DEBUG)</p>
</dd>
<dt>Reports:</dt><dd><p>We write language reports into the folder specified in config.ini
(section Paths, variable languagereports)</p>
</dd>
</dl>
<p>Examples:</p>
<dl class="simple">
<dt>Only update German language information page with more logging</dt><dd><p>python3 resourcesbot.py –lang de -l info</p>
</dd>
<dt>Normal run (updating language information pages where necessary)</dt><dd><p>python3 resourcesbot.py</p>
</dd>
</dl>
<p>Run script completely without making any changes on the server:
Best for understanding what the script does, but requires running via pywikibot pwb.py</p>
<blockquote>
<div><p>python3 pwb.py -simulate resourcesbot.py -l info</p>
</div></blockquote>
<p>This is only the wrapper script, all main logic is in resourcesbot/bot.py</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">#</a></h2>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">#</a></h3>
<div class="table-wrapper autosummary longtable docutils container">
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywikitools.resources_bot.parse_arguments" title="pywikitools.resources_bot.parse_arguments"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_arguments</span></code></a>() → pywikitools.resourcesbot.bot.ResourcesBot</p></td>
<td><p>Parses command-line arguments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywikitools.resources_bot.set_loglevel" title="pywikitools.resources_bot.set_loglevel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_loglevel</span></code></a>(config: configparser.ConfigParser, loglevel: int)</p></td>
<td><p>Setting up logging to three log files and to stdout.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="pywikitools.resources_bot.parse_arguments">
<span class="sig-prename descclassname"><span class="pre">pywikitools.resources_bot.</span></span><span class="sig-name descname"><span class="pre">parse_arguments</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../resourcesbot/bot/index.html#pywikitools.resourcesbot.bot.ResourcesBot" title="pywikitools.resourcesbot.bot.ResourcesBot"><span class="pre">pywikitools.resourcesbot.bot.ResourcesBot</span></a></span></span><a class="headerlink" href="#pywikitools.resources_bot.parse_arguments" title="Permalink to this definition">#</a></dt>
<dd><p>Parses command-line arguments.
&#64;return: ResourcesBot instance</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pywikitools.resources_bot.set_loglevel">
<span class="sig-prename descclassname"><span class="pre">pywikitools.resources_bot.</span></span><span class="sig-name descname"><span class="pre">set_loglevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">configparser.ConfigParser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loglevel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pywikitools.resources_bot.set_loglevel" title="Permalink to this definition">#</a></dt>
<dd><p>Setting up logging to three log files and to stdout.</p>
<p>The file paths for the three log files (for each log level WARNING, INFO and DEBUG) are
configured in the config.ini
&#64;param loglevel: logging.WARNING is standard, logging.INFO for more details, logging.DEBUG for a lot of output</p>
</dd></dl>

</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, 4training
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pywikitools.resources_bot</span></code></a><ul>
<li><a class="reference internal" href="#module-contents">Module Contents</a><ul>
<li><a class="reference internal" href="#functions">Functions</a><ul>
<li><a class="reference internal" href="#pywikitools.resources_bot.parse_arguments">parse_arguments</a></li>
<li><a class="reference internal" href="#pywikitools.resources_bot.set_loglevel">set_loglevel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    </body>
</html>